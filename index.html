
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å¤©è³¦èƒ½é‡æ¸¬é©—ï½œæ­£å¼ç‰ˆ</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;600;700;900&display=swap" rel="stylesheet">

  <style>
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:"Noto Sans TC",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:url("https://i.ibb.co/LMwXqHx/23-0.png") center/cover no-repeat fixed;
      color:#111827;
    }
    .section{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
      text-align:center;
    }
    button{cursor:pointer}

    /* é–‹å§‹é  */
    #startPage h1{
      color:#c0822a;
      font-size:clamp(28px,5vw,40px);
      margin-bottom:12px;
    }
    #startPage p{
      font-size:16px;
      margin-bottom:20px;
      color:#374151;
      line-height:1.7;
    }
    #startPage button{
      padding:14px 28px;
      font-size:18px;
      font-weight:700;
      border:none;
      border-radius:14px;
      background:#6c4af2;
      color:#fff;
      box-shadow:0 8px 24px rgba(108,74,242,.45);
    }
    #startPage button:hover{filter:brightness(1.05)}

    /* é¡Œç›®é  */
    #quizPage{
      display:none;
      text-align:left;
    }
    #quizInner{
      max-width:720px;
      width:100%;
      margin:0 auto;
      padding:20px 18px;
      border-radius:20px;
      background:rgba(255,255,255,.9);
      box-shadow:0 14px 40px rgba(0,0,0,.12);
    }
    #progress{
      font-size:14px;
      color:#6b7280;
      margin-bottom:8px;
    }
    #questionTitle{
      font-size:20px;
      font-weight:700;
      margin-bottom:14px;
      line-height:1.6;
    }
    .option{
      padding:12px 10px;
      border-radius:10px;
      border:1px solid #e5e7eb;
      font-size:16px;
      margin-top:8px;
      background:#fff;
      transition:.18s;
      user-select:none;
    }
    .option:hover{
      border-color:#6c4af2;
      color:#6c4af2;
      box-shadow:0 6px 14px rgba(108,74,242,.18);
      transform:translateY(-1px);
    }
    .option.selected{
      border-color:#6c4af2;
      color:#6c4af2;
      background:rgba(108,74,242,.10);
      box-shadow:0 10px 20px rgba(108,74,242,.18);
      transform:translateY(-1px);
    }
    .option.selected:hover{transform:translateY(-1px)}

    #navRow{
      margin-top:18px;
      display:flex;
      justify-content:space-between;
      gap:8px;
    }
    #navRow button{
      flex:1;
      padding:10px 0;
      border-radius:10px;
      border:none;
      font-size:15px;
      font-weight:600;
    }
    #prevBtn{
      background:#f3f4f6;
      color:#111827;
    }
    #prevBtn:disabled{
      opacity:.4;
      cursor:not-allowed;
    }
    #nextBtn{
      background:#6c4af2;
      color:#fff;
      box-shadow:0 6px 18px rgba(108,74,242,.35);
    }

    /* çµæœé  */
    #resultPage{
      display:none;
      text-align:left;
    }
    #resultInner{
      max-width:960px;
      width:100%;
      margin:0 auto;
      padding:22px 18px 26px;
      border-radius:22px;
      background:rgba(255,255,255,.95);
      box-shadow:0 16px 45px rgba(0,0,0,.14);
      display:grid;
      gap:18px;
    }
    @media(min-width:900px){
      #resultInner{grid-template-columns:1.05fr .95fr}
    }
    #finalTraitTitle{
      font-size:22px;
      font-weight:800;
      color:#c0822a;
      margin:0 0 8px;
    }
    #energyText{
      white-space:pre-wrap;
      font-size:15px;
      line-height:1.7;
      margin:6px 0 10px;
      color:#374151;
    }
    #traitDesc{
      white-space:pre-wrap;
      font-size:15px;
      line-height:1.8;
      margin-top:6px;
      color:#111827;
    }
    #radar{
      max-width:420px;
      width:100%;
      height:auto;
      display:block;
      margin:0 auto;
    }
    #traitImg{
      max-width:360px;
      width:100%;
      border-radius:18px;
      margin:10px auto 0;
      display:block;
    }
    #againBtn{
      margin-top:14px;
      padding:10px 16px;
      border:none;
      border-radius:999px;
      background:#6c4af2;
      color:#fff;
      font-weight:700;
      font-size:15px;
      cursor:pointer;
    }
  </style>
</head>

<body>

  <!-- é–‹å§‹é  -->
  <section id="startPage" class="section">
    <div>
      <h1>å®Œæˆ 25 é¡Œ<br>æ¸¬å‡ºä½ çš„å¤©è³¦èƒ½é‡ âš¡ï¸</h1>
      <p>ç”¨ 8 å¤§è·æ¶¯ç‰¹è³ªï¼Œå¹«ä½ çœ‹è¦‹æœ€è‡ªç„¶çš„è³ºéŒ¢æ–¹å¼ã€‚<br>å¤§æ¦‚ 5 åˆ†é˜ï¼Œå°±èƒ½æŠŠä½ çš„å¤©è³¦åœ°åœ–æ‰“é–‹ã€‚</p>
      <button onclick="startQuiz()">é–‹å§‹ä½œç­” ğŸš€</button>
    </div>
  </section>

  <!-- é¡Œç›®é  -->
  <section id="quizPage" class="section">
    <div id="quizInner">
      <div id="progress"></div>
      <div id="questionTitle"></div>
      <div id="options"></div>
      <div id="navRow">
        <button id="prevBtn" onclick="prevQ()">â¬… ä¸Šä¸€é¡Œ</button>
        <button id="nextBtn" onclick="nextQ()">ä¸‹ä¸€é¡Œ âœ</button>
      </div>
    </div>
  </section>

  <!-- çµæœé  -->
  <section id="resultPage" class="section">
    <div id="resultInner">
      <div>
        <h2 id="finalTraitTitle"></h2>
        <div id="energyText"></div>
        <div id="traitDesc"></div>
        <button id="againBtn" onclick="location.reload()">å†æ¸¬ä¸€æ¬¡</button>
      </div>
      <div>
        <canvas id="radar" width="420" height="420"></canvas>
        <img id="traitImg" alt="trait image">
      </div>
    </div>
  </section>

<script>
/* ========= é¡Œç›®ï¼ˆ25 é¡Œï½œå»ç›¸ä¼¼ç‰ˆï¼‰ ========= */
const QUESTIONS = [
  { q:"ï¼ˆ1ï¼‰å¹³å¸¸åšäº‹æ™‚ï¼Œä½ æœ€å¸¸è¢«æ€éº¼å½¢å®¹ï¼Ÿ", a:["é»å­å¾ˆå¤šã€æƒ³æ³•è·³å¾ˆå¿«","è·Ÿä½ ç›¸è™•å¾ˆèˆ’æœ","åšäº‹æœƒå…ˆæƒ³é¢¨éšª","æ±è¥¿æ•´ç†å¾—å¾ˆå®Œæ•´"] },
  { q:"ï¼ˆ2ï¼‰ä½ æ¯”è¼ƒå–œæ­¡åˆ¥äººæ€éº¼å½¢å®¹ä½ ï¼Ÿ", a:["æº«å’Œå¥½ç›¸è™•","èªªåˆ°åšåˆ°","æ±ºå®šäº‹æƒ…å¾ˆå¿«","è®“äººæ„Ÿè¦ºæœ‰èƒ½é‡"] },
  { q:"ï¼ˆ3ï¼‰å“ªä¸€ç¨®æƒ…æ³æœ€è®“ä½ æœ‰æˆå°±æ„Ÿï¼Ÿ", a:["å…¨å±€åœ¨ä½ æŒæ¡ä¸­","è…¦ä¸­æƒ³æ³•è¢«å¯¦ç¾","è¢«å¤§å®¶è‚¯å®šã€çœ‹è¦‹","æŠ“åˆ°æ™‚æ©Ÿé †å‹¢è€Œç‚º"] },
  { q:"ï¼ˆ4ï¼‰åˆä½œæ™‚ï¼Œä½ è‡ªç„¶æœƒåœ¨å“ªå€‹ä½ç½®ï¼Ÿ", a:["ä¸Ÿæƒ³æ³•ã€å®šæ–¹å‘","å°å¤–æºé€šã€ä¸²äºº","æ’æ™‚ç¨‹ã€æ§é€²åº¦","å»ºæµç¨‹ã€é¡§å“è³ª"] },
  { q:"ï¼ˆ5ï¼‰åœ¨ä¸€ç¾¤äººè£¡ï¼Œä½ é€šå¸¸æ˜¯ï¼Ÿ", a:["æƒ³åšä»€éº¼å°±åšä»€éº¼","å¸¶å‹•æ°£æ°›çš„é‚£å€‹","è§€å¯Ÿå¾Œæ‰è¡Œå‹•","è©±ä¸å¤šä½†å¾ˆç©©"] },
  { q:"ï¼ˆ6ï¼‰å£“åŠ›ä¾†æ™‚ï¼Œä½ æœ€å¸¸ä¾é å“ªä¸€ç¨®ï¼Ÿ", a:["é åŠªåŠ›ç¡¬æ’","é éˆæ„Ÿè§£æ±º","é äººå¹«å¿™","é æ•ˆç‡æµç¨‹"] },
  { q:"ï¼ˆ7ï¼‰å“ªä¸€å¥æ¯”è¼ƒåƒä½ å…§å¿ƒçš„ç‹€æ…‹ï¼Ÿ", a:["æˆ‘ç¿’æ…£è‡ªå·±æƒ³æ¸…æ¥š","æˆ‘éœ€è¦æœ‰äººäº’å‹•","æˆ‘å¸¸æƒ³å¤ªä¹…","æˆ‘å—ä¸äº†æ‹–"] },
  { q:"ï¼ˆ8ï¼‰é‡åˆ°é—œéµé¸æ“‡æ™‚ï¼Œä½ é€šå¸¸ï¼Ÿ", a:["è½è½åˆ¥äººç¶“é©—","çœ‹å¤§å®¶æ€éº¼é¸","åˆ—æ¸…æ¥šåˆ©å¼Š","æ„Ÿè¦ºå°å°±è¡"] },
  { q:"ï¼ˆ9ï¼‰ä½ æœ€æ€•è¢«è²¼ä¸Šå“ªå€‹æ¨™ç±¤ï¼Ÿ", a:["çœ‹èµ·ä¾†å¾ˆæ··","ç„¡èŠæ²’ç‰¹è‰²","å¥½åƒæ²’æœ‹å‹","æ€è€ƒå¾ˆäº‚"] },
  { q:"ï¼ˆ10ï¼‰å“ªç¨®å·¥ä½œå…§å®¹ä½ æ¯”è¼ƒæœ‰ç•«é¢ï¼Ÿ", a:["è²·ä½è³£é«˜ã€è«‡æ¢ä»¶","ç®¡ç†åˆ¶åº¦ã€æµç¨‹","å¿«é€Ÿè©¦éŒ¯ã€æ“´å¼µ","å’Œäººäº’å‹•ã€åˆä½œ"] },
  { q:"ï¼ˆ11ï¼‰å¦‚æœå¯ä»¥é¸ï¼Œä½ æœ€æƒ³é¿é–‹å“ªç¨®äº‹ï¼Ÿ", a:["æƒ³æ–°ç­–ç•¥","åˆ†å·¥èˆ‡æ¶æ§‹","æµç¨‹èˆ‡ç³»çµ±","ä¸€ç›´å°äºº"] },
  { q:"ï¼ˆ12ï¼‰åœ˜éšŠè£¡ï¼Œä½ å¸¸è¢«æœŸå¾…åšä»€éº¼ï¼Ÿ", a:["æŠ“å•é¡Œã€æŒ‘æ¯›ç—…","ææ–°æ–¹å‘","å°å¤–èªªè©±","æŠŠäº‹åšå®Œ"] },
  { q:"ï¼ˆ13ï¼‰å“ªä¸€ä»¶äº‹æœ€å®¹æ˜“è®“ä½ å¡é—œï¼Ÿ", a:["ä¸»å‹•ç¶“ç‡Ÿé—œä¿‚","æ¯”åƒ¹ã€ç®— CP","æ†‘ç©ºæƒ³é»å­","æŒ–ç´°ç¯€éŒ¯èª¤"] },
  { q:"ï¼ˆ14ï¼‰ä½ æœ€æœ‰è‡ªä¿¡çš„èƒ½åŠ›æ˜¯ï¼Ÿ", a:["æƒ³å‡ºæ²’äººæƒ³éçš„é»","æŠŠäººæ”¾åœ¨å°çš„ä½ç½®","ç®—å‡ºæœ€åˆ’ç®—æ–¹æ¡ˆ","æŠŠäº‹æƒ…åšåˆ°æ¨™æº–"] },
  { q:"ï¼ˆ15ï¼‰å“ªç¨®ç‹€æ³ä½ æœƒæœ€å…§è€—ï¼Ÿ", a:["äººéš›æ°£æ°›å¾ˆå·®","æ²’è¦å‰‡ã€æ²’æ­¥é©Ÿ","é‚è¼¯å‰å¾Œä¸é€š","ä¸€ç›´é‡è¤‡"] },
  { q:"ï¼ˆ16ï¼‰ä½ ç‰¹åˆ¥å—ä¸äº†å“ªä¸€ç¨®äººï¼Ÿ", a:["ä¸å®ˆç•Œç·š","ä¸€æˆä¸è®Š","æ­»ä¸è®Šé€š","åšäº‹å¾ˆäº‚"] },
  { q:"ï¼ˆ17ï¼‰åˆ¥äººæœ€å¸¸ç¨±è®šä½ ï¼Ÿ", a:["å¾ˆæœƒæ¨ã€å¾ˆæœƒèªª","å¾ˆæœƒè«‡","çœ‹å•é¡Œå¾ˆæº–","æƒ³æ³•å¾ˆç‰¹åˆ¥"] },
  { q:"ï¼ˆ18ï¼‰å“ªä¸€ä»¶äº‹ä½ æœ€æ²’æŠŠæ¡ï¼Ÿ", a:["æŠŠæµç¨‹è®Šæ›´å¥½","åˆ¤æ–·è¶¨å‹¢","æƒ³æ–°ç©æ³•","é•·æ™‚é–“äº’å‹•"] },
  { q:"ï¼ˆ19ï¼‰ä»€éº¼æ™‚å€™ä½ æœƒæœ€é–‹å¿ƒï¼Ÿ", a:["å‰µæ„è¢«æ¡ç”¨","èªè­˜å°çš„äºº","æ’¿åˆ°å¥½åº·","ç³»çµ±è·‘å¾—å¾ˆé †"] },
  { q:"ï¼ˆ20ï¼‰å“ªä¸€ä»¶äº‹æœ€è®“ä½ ç…©ç‡¥ï¼Ÿ", a:["è¦å‰‡è¢«äº‚ç ´","ä¸€ç›´ç­‰æ²’é€²åº¦","äººéš›å¤±æº«","ä¸çŸ¥é“æ€éº¼é…åˆ"] },
  { q:"ï¼ˆ21ï¼‰å·¥ä½œæ™‚ï¼Œä½ æ¯”è¼ƒåƒå“ªä¸€å‹ï¼Ÿ", a:["ç©©ç©©æŠŠé—œ","æ¢ç†æ¸…æ¥š","é»å­å‹","å¤–æ”¾å‹"] },
  { q:"ï¼ˆ22ï¼‰å“ªå€‹å½¢å®¹ä½ æœƒè¦ºå¾—æ€ªæ€ªçš„ï¼Ÿ", a:["å¾ˆç©©","å¾ˆæœ‰æ¢ç†","å¾ˆæœ‰å‰µæ„","å¾ˆå¤–å‘"] },
  { q:"ï¼ˆ23ï¼‰ä½ è¦ºå¾—è‡ªå·±åšä»€éº¼æœ€ä¸è²»åŠ›ï¼Ÿ", a:["å’Œäººå»ºç«‹é€£çµ","çœ‹å‡ºæ©Ÿæœƒé»","å„ªåŒ–æµç¨‹","ç™¼æƒ³æ–°æ–¹å‘"] },
  { q:"ï¼ˆ24ï¼‰å¿«æ’ä¸ä½æ™‚ï¼Œä½ æœƒé ä»€éº¼ï¼Ÿ", a:["é‚è¼¯èˆ‡åˆ¤æ–·","å¤©è³¦ç›´è¦º","æ‰¾äººå¹«å¿™","ç¹¼çºŒæ’"] },
  { q:"ï¼ˆ25ï¼‰äº‹æƒ…å®Œæˆå¾Œï¼Œä½ ç¬¬ä¸€å€‹åæ‡‰æ˜¯ï¼Ÿ", a:["å¥½å¥½æ…¶ç¥ä¸€ä¸‹","æ„Ÿè¬èº«é‚Šçš„äºº","æ”¶å°¾æ•´ç†","æƒ³ä¸‹ä¸€æ­¥"] },
];

const SCORE_MAP = [
  { A:{D:+1}, B:{B:+1}, C:{T:+1}, D:{S:+1} },
  { A:{T:+1}, B:{S:+1}, C:{D:+1}, D:{B:+1} },
  { A:{S:+1}, B:{D:+1}, C:{B:+1}, D:{T:+1} },
  { A:{D:+1}, B:{B:+1}, C:{T:+1}, D:{S:+1} },
  { A:{D:+1}, B:{B:+1}, C:{T:+1}, D:{S:+1} },
  { A:{T:+1}, B:{D:+1}, C:{B:+1}, D:{S:+1} },
  { A:{S:+1}, B:{B:+1}, C:{T:+1}, D:{D:+1} },
  { A:{T:+1}, B:{B:+1}, C:{S:+1}, D:{D:+1} },
  { A:{T:+1}, B:{D:+1}, C:{B:+1}, D:{S:+1} },
  { A:{T:+1}, B:{S:+1}, C:{D:+1}, D:{B:+1} },
  { A:{D:-1}, B:{T:-1}, C:{S:-1}, D:{B:-1} },
  { A:{S:+1}, B:{D:+1}, C:{B:+1}, D:{T:+1} },
  { A:{B:-1}, B:{T:-1}, C:{D:-1}, D:{S:-1} },
  { A:{D:+1}, B:{B:+1}, C:{T:+1}, D:{S:+1} },
  { A:{B:+1}, B:{T:+1}, C:{S:+1}, D:{D:+1} },
  { A:{S:+1}, B:{B:+1}, C:{D:+1}, D:{T:+1} },
  { A:{B:+1}, B:{T:+1}, C:{S:+1}, D:{D:+1} },
  { A:{B:+1}, B:{D:+1}, C:{T:+1}, D:{S:+1} },
  { A:{D:+1}, B:{B:+1}, C:{T:+1}, D:{S:+1} },
  { A:{S:+1}, B:{D:+1}, C:{B:+1}, D:{T:+1} },
  { A:{S:+1}, B:{T:+1}, C:{D:+1}, D:{B:+1} },
  { A:{S:-1}, B:{T:-1}, C:{D:-1}, D:{B:-1} },
  { A:{B:+1}, B:{T:+1}, C:{S:+1}, D:{D:+1} },
  { A:{S:+1}, B:{D:+1}, C:{B:+1}, D:{T:+1} },
  { A:{D:+1}, B:{B:+1}, C:{T:+1}, D:{S:+1} },
];

const ENERGY_DESC = {
  D:"æœ‰å‰µæ„ã€å¿«ã€ç›´è¦ºæ´¾ï¼Œå®¹æ˜“æ´»åœ¨è‡ªå·±çš„ä¸–ç•Œï¼Œæ²’è€å¿ƒä½†è¡å¾ˆå¿«ï¼Œä¹Ÿæœ‰é»é©•å‚²ã€‚",
  B:"å–œæ­¡è·Ÿäººç›¸è™•ã€èˆå°æ„Ÿå¼·ï¼Œæ“…é•·å½±éŸ¿åŠ›ã€åª’åˆèˆ‡æ”¯æŒä»–äººï¼Œå¾ˆåœ¨æ„æ°›åœã€‚",
  T:"é‡è¦–CPå€¼ã€æœ‰è‡ªå·±çš„æ­¥é©Ÿï¼Œæ“…é•·æœå‹™ã€ä¿ƒéŠ·èˆ‡æ¶æ§‹ï¼ŒæŠŠäº‹æƒ…åšæˆå¯åŸ·è¡Œçš„æµç¨‹ã€‚",
  S:"é‡è¦–ç³»çµ±èˆ‡é‚è¼¯ï¼Œæœƒæ‰¾å•é¡Œã€åˆ†æè³‡æ–™ã€å„ªåŒ–äº‹å‹™ã€åšSOPï¼Œå–œæ­¡æŠŠäº‹åšå¥½ã€‚"
};

const ARCHETYPE_RULES = [
  { key:"D",  name:"å‰µä½œè€…", energies:["D"] },
  { key:"DB", name:"æ˜æ˜Ÿ", energies:["D","B"] },
  { key:"B",  name:"æ”¯æŒè€…", energies:["B"] },
  { key:"BT", name:"åª’åˆè€…", energies:["B","T"] },
  { key:"T",  name:"å•†äºº", energies:["T"] },
  { key:"TS", name:"ç©è“„è€…", energies:["T","S"] },
  { key:"S",  name:"åœ°ä¸»", energies:["S"] },
  { key:"SD", name:"æŠ€å¸«", energies:["S","D"] }
];

const TRAIT_DETAIL = {
  "å‰µä½œè€…":{
    title:"ğŸŒ± å‰µä½œè€…",
    energyKey:"D",
    text:
"ä½ æ˜¯é‚£ç¨®ä¸€æƒ³åˆ°å°±æœƒæƒ³é¦¬ä¸Šå‹•æ‰‹çš„äººã€‚\n\n"+
"å¤©ç”Ÿå„ªå‹¢\n"+
"å–œæ­¡æ–°é®®ã€æœ‰è¶£ã€å¥½ç©çš„äº‹ï¼Œé»å­å¤šã€è¡Œå‹•å¿«ï¼Œèƒ½åŒæ™‚è·‘å¾ˆå¤šä»»å‹™ï¼Œå¾ˆå¿«å°±èƒ½å‰µé€ æ”¶å…¥ã€é–‹å‡ºæ–°å±€ã€‚\n\n"+
"å®¹æ˜“å¡é—œçš„åœ°æ–¹\n"+
"è·‘å¤ªå¿«ã€ä»€éº¼éƒ½æƒ³è‡ªå·±ä¾†ï¼Œåœ˜éšŠè·Ÿä¸ä¸Šï¼Œæœ€å¾Œåè€ŒæŠŠè‡ªå·±ç´¯å£ã€‚\n\n"+
"è‡´å¯Œé—œéµ\n"+
"ğŸ‘‰ è¨­è¨ˆä¸€å¥—å¯ä»¥é•·å‡ºæ±è¥¿çš„å•†æ¥­æ¨¡å¼ï¼Œå»ºç«‹ã€ŒèŠ±åœ’ã€ï¼Œè€Œä¸æ˜¯ä¸€ç›´è‡ªå·±æ¾†æ°´ã€‚"
  },
  "æ˜æ˜Ÿ":{
    title:"âœ¨ æ˜æ˜Ÿ",
    energyKey:"B",
    text:
"ä½ æœ¬äººï¼Œå°±æ˜¯äº®é»ã€‚\n\n"+
"å¤©ç”Ÿå„ªå‹¢\n"+
"é­…åŠ›å¼·ã€è¾¨è­˜åº¦é«˜ï¼Œé©åˆåšå€‹äººå“ç‰Œï¼Œè¶Šåšè‡ªå·±è¶Šæœ‰å¸‚å ´ã€‚\n\n"+
"å®¹æ˜“å¡é—œçš„åœ°æ–¹\n"+
"ä»€éº¼éƒ½è¦ªåŠ›è¦ªç‚ºï¼Œåè€Œå¿½ç•¥ã€Œåƒ¹å€¼å°±åœ¨ä½ èº«ä¸Šã€ã€‚\n\n"+
"è‡´å¯Œé—œéµ\n"+
"ğŸ‘‰ æ‰“é€ ç¨ä¸€ç„¡äºŒçš„å“ç‰Œï¼Œå…¶ä»–äº‹æƒ…äº¤çµ¦åˆä½œå¤¥ä¼´ã€‚"
  },
  "æ”¯æŒè€…":{
    title:"ğŸ¤ æ”¯æŒè€…",
    energyKey:"B",
    text:
"ä½ æ˜¯åœ˜éšŠè£¡çš„é»è‘—åŠ‘ã€‚\n\n"+
"å¤©ç”Ÿå„ªå‹¢\n"+
"å–œæ­¡ä¸€èµ·åšäº‹ã€å¾ˆæœƒé€£çµäººï¼Œåªè¦èªåŒä¸€å€‹ç†å¿µï¼Œå°±èƒ½å…¨å¿ƒæŠ•å…¥ã€‚\n\n"+
"å®¹æ˜“å¡é—œçš„åœ°æ–¹\n"+
"å¤ªåœ¨ä¹æ„Ÿæƒ…èˆ‡äººæƒ…ï¼Œç”Ÿæ´»ç¯€å¥å®¹æ˜“è¢«æ‰“äº‚ã€‚\n\n"+
"è‡´å¯Œé—œéµ\n"+
"ğŸ‘‰ é¸å°åœ˜éšŠï¼Œç”¨åˆä½œæ”¾å¤§ä½ çš„å½±éŸ¿åŠ›ã€‚"
  },
  "åª’åˆè€…":{
    title:"ğŸ”— åª’åˆè€…",
    energyKey:"T",
    text:
"ä½ è¶…æœƒæŠŠäººæ”¾åœ¨å°çš„ä½ç½®ã€‚\n\n"+
"å¤©ç”Ÿå„ªå‹¢\n"+
"å¥½ç›¸è™•ã€æ‡‚äº¤æ˜“ï¼Œèƒ½åœ¨å°çš„æ™‚é–“ç‰½èµ·å°çš„é€£çµã€‚\n\n"+
"å®¹æ˜“å¡é—œçš„åœ°æ–¹\n"+
"å¿™è‘—å¹«å¤§å®¶æ­æ©‹ï¼Œå»å¿˜äº†è‡ªå·±çš„åˆ©æ½¤èˆ‡ä½ç½®ã€‚\n\n"+
"è‡´å¯Œé—œéµ\n"+
"ğŸ‘‰ æ‰¾åˆ°ä½ çœŸå¿ƒå–œæ­¡ã€ä¹Ÿå¤ å¥½çš„å•†å“ï¼Œå“è³ªå°±æ˜¯ä½ çš„åº•æ°£ã€‚"
  },
  "å•†äºº":{
    title:"ğŸ’¼ å•†äºº",
    energyKey:"T",
    text:
"ä½ å°ã€Œæ™‚æ©Ÿã€ç‰¹åˆ¥æ•æ„Ÿã€‚\n\n"+
"å¤©ç”Ÿå„ªå‹¢\n"+
"è§€å¯ŸåŠ›å¼·ã€åæ‡‰å¿«ï¼Œèƒ½åœ¨è¡Œå‹•ä¸­æ‰¾åˆ°æ©Ÿæœƒã€‚\n\n"+
"å®¹æ˜“å¡é—œçš„åœ°æ–¹\n"+
"å¤ªå°ˆæ³¨ç•¶ä¸‹ï¼Œå®¹æ˜“éŒ¯éé•·æœŸåƒ¹å€¼ã€‚\n\n"+
"è‡´å¯Œé—œéµ\n"+
"ğŸ‘‰ æŒæ¡ç¯€å¥ï¼Œè²·ä½è³£é«˜ï¼Œçœ‹æ‡‚å¾ªç’°ã€‚"
  },
  "ç©è“„è€…":{
    title:"ğŸª™ ç©è“„è€…",
    energyKey:"S",
    text:
"ä½ èµ°å¾—æ…¢ï¼Œä½†èµ°å¾—å¾ˆç©©ã€‚\n\n"+
"å¤©ç”Ÿå„ªå‹¢\n"+
"è¬¹æ…å¯é ï¼Œæ“…é•·ç´¯ç©å°ˆæ¥­ã€äººè„ˆèˆ‡æœƒå¢å€¼çš„è³‡ç”¢ã€‚\n\n"+
"å®¹æ˜“å¡é—œçš„åœ°æ–¹\n"+
"æƒ³æº–å‚™åˆ°å®Œç¾æ‰è¡Œå‹•ï¼Œå®¹æ˜“æ‹–å»¶ã€‚\n\n"+
"è‡´å¯Œé—œéµ\n"+
"ğŸ‘‰ è²·é€²ä¸¦æŒæœ‰æœƒé•·å¤§çš„è³‡ç”¢ï¼Œæ™‚é–“æ˜¯ä½ çš„ç›Ÿå‹ã€‚"
  },
  "åœ°ä¸»":{
    title:"ğŸ  åœ°ä¸»",
    energyKey:"S",
    text:
"ä½ æ˜¯æŒæ§å¾Œç«¯çš„é—œéµè§’è‰²ã€‚\n\n"+
"å¤©ç”Ÿå„ªå‹¢\n"+
"æœ‰æ¢ç†ã€é‡ç´°ç¯€ï¼Œæµç¨‹ä¸€é †ï¼Œæ•´å€‹ç³»çµ±å°±æ´»èµ·ä¾†ã€‚\n\n"+
"å®¹æ˜“å¡é—œçš„åœ°æ–¹\n"+
"ä¸æ„›ç†±é¬§ç¤¾äº¤ï¼Œå®¹æ˜“é é›¢å‰ç·šæ©Ÿæœƒã€‚\n\n"+
"è‡´å¯Œé—œéµ\n"+
"ğŸ‘‰ æŒæ¡èƒ½ç©©å®šç”¢ç”Ÿç¾é‡‘æµçš„è³‡ç”¢ã€‚"
  },
  "æŠ€å¸«":{
    title:"ğŸ› ï¸ æŠ€å¸«",
    energyKey:"D",
    text:
"ä½ æ˜¯è®“äº‹æƒ…ã€Œè®Šæ›´å¥½ã€çš„äººã€‚\n\n"+
"å¤©ç”Ÿå„ªå‹¢\n"+
"èƒ½è¦ªè‡ªä¸‹å ´ã€å„ªåŒ–æµç¨‹ï¼ŒæŠŠæ··äº‚è®Šæˆç³»çµ±ã€‚\n\n"+
"å®¹æ˜“å¡é—œçš„åœ°æ–¹\n"+
"èª¤ä»¥ç‚ºè‡ªå·±è¦å¾ 0 å‰µé€ ï¼Œå…¶å¯¦ä½ æ›´æ“…é•·ã€Œå„ªåŒ–ã€ã€‚\n\n"+
"è‡´å¯Œé—œéµ\n"+
"ğŸ‘‰ æ‰“é€ æ›´å¥½çš„ç³»çµ±ï¼Œè€Œä¸æ˜¯ä¸€ç›´é‡ä¾†ã€‚"
  }
};

const ENERGY_IMAGE = {
  B:'https://i.ibb.co/jZQjqmNg/1-0.jpg',
  D:'https://i.ibb.co/0Ry8FxZ1/2-0.jpg',
  T:'https://i.ibb.co/S40Nh5dw/3-0.jpg',
  S:'https://i.ibb.co/Hfjb0rhc/4-0.jpg'
};

function applyDelta(scores, delta){
  for(const k in delta){
    scores[k] = (scores[k] || 0) + delta[k];
  }
}
function sortEnergies(scores){
  return Object.entries(scores)
    .sort((a,b)=>b[1]-a[1])
    .map(([k,v])=>({key:k, score:v}));
}
function pickArchetype(ordered){
  const top1 = ordered[0]?.key;
  const top2 = ordered[1]?.key;
  const pairKey = [top1, top2].sort().join("");

  const pairHit = ARCHETYPE_RULES.find(r => r.key.split("").sort().join("") === pairKey);
  if(pairHit) return pairHit;

  const singleHit = ARCHETYPE_RULES.find(r => r.key === top1);
  if(singleHit) return singleHit;

  return { key: top1 || "D", name:"å‰µä½œè€…", energies:[top1 || "D"] };
}
function analyzeTalent(answerArray){
  if(!Array.isArray(answerArray) || answerArray.length !== 25) throw new Error("ç­”æ¡ˆæ•¸é‡éœ€ç‚º 25 é¡Œ");
  const scores = { D:0, B:0, T:0, S:0 };

  for(let i=0;i<25;i++){
    const v = answerArray[i];
    if(!v) throw new Error(`ç¬¬ ${i+1} é¡Œæœªä½œç­”`);
    const letter = ["A","B","C","D"][v-1];
    applyDelta(scores, SCORE_MAP[i][letter]);
  }

  const ordered = sortEnergies(scores);
  const main = ordered[0].key;
  const second = ordered[1].key;
  const archetype = pickArchetype(ordered);

  const absSum = Math.abs(scores.D)+Math.abs(scores.B)+Math.abs(scores.T)+Math.abs(scores.S) || 1;
  const percentages = {
    D: Math.round(Math.abs(scores.D)/absSum*100),
    B: Math.round(Math.abs(scores.B)/absSum*100),
    T: Math.round(Math.abs(scores.T)/absSum*100),
    S: Math.round(Math.abs(scores.S)/absSum*100),
  };

  const conclusionText =
`ä½ çš„ä¸»èƒ½é‡æ˜¯ã€${main}ã€‘ï¼Œæ¬¡èƒ½é‡æ˜¯ã€${second}ã€‘ã€‚
ä½ é€™æ¬¡çš„å¤©è³¦é †æµè§’è‰²æ˜¯ã€${archetype.name}ã€‘ã€‚

ä¸»èƒ½é‡ç‰¹å¾µï¼š${ENERGY_DESC[main]}
æ¬¡èƒ½é‡åŠ æˆï¼š${ENERGY_DESC[second]}`;

  return { scores, percentages, orderedEnergies: ordered, mainEnergy: main, secondEnergy: second, final_trait: archetype.name, conclusionText };
}

/* ========= ä½œç­”æµç¨‹ ========= */
let currentIndex = 0;
const answers = new Array(25);

function startQuiz(){
  document.getElementById("startPage").style.display="none";
  document.getElementById("quizPage").style.display="flex";
  renderQuestion();
}
function renderQuestion(){
  const q = QUESTIONS[currentIndex];
  const total = QUESTIONS.length;

  document.getElementById("progress").innerText = `ç¬¬ ${currentIndex+1} / ${total} é¡Œ`;
  document.getElementById("questionTitle").innerText = q.q;

  const selected = answers[currentIndex];
  const optsHtml = q.a.map((txt,i)=>{
    const isSel = selected === (i+1);
    return `<div class="option ${isSel ? 'selected' : ''}" onclick="pickOption(${i})">${String.fromCharCode(65+i)}ï½œ${txt}</div>`;
  }).join("");
  document.getElementById("options").innerHTML = optsHtml;

  document.getElementById("prevBtn").disabled = currentIndex===0;
  document.getElementById("nextBtn").innerText = currentIndex === total-1 ? "çœ‹çµæœ âœ" : "ä¸‹ä¸€é¡Œ âœ";
}
function pickOption(idx){
  answers[currentIndex] = idx+1;
  renderQuestion();

  if(currentIndex === QUESTIONS.length - 1) return;

  setTimeout(()=>{
    currentIndex++;
    renderQuestion();
    window.scrollTo(0,0);
  }, 120);
}
function prevQ(){
  if(currentIndex>0){
    currentIndex--;
    renderQuestion();
    window.scrollTo(0,0);
  }
}
function nextQ(){
  const a = answers[currentIndex];
  if(!a){ alert("é€™ä¸€é¡Œé‚„æ²’ä½œç­”å–”ï½"); return; }
  if(currentIndex < QUESTIONS.length-1){
    currentIndex++;
    renderQuestion();
    window.scrollTo(0,0);
  }else{
    showResult();
  }
}

/* ========= é¡¯ç¤ºçµæœ ========= */
function showResult(){
  if(answers.some(v=>!v)){
    alert("é‚„æœ‰é¡Œç›®æ²’ä½œç­”å–”ï½");
    return;
  }

  const res = analyzeTalent(answers);
  const p = res.percentages;
  const finalName = res.final_trait;
  const detail = TRAIT_DETAIL[finalName] || null;

  document.getElementById("quizPage").style.display="none";
  document.getElementById("resultPage").style.display="flex";

  const energyText =
    `æˆ‘çš„å¤©è³¦èƒ½é‡\n`+
    `ğŸ”Œ ç™¼é›»æ©Ÿ Dï¼š${p.D}%\n`+
    `ğŸ”¥ ç«ç„° Bï¼š${p.B}%\n`+
    `ğŸ¥ ç¯€å¥ Tï¼š${p.T}%\n`+
    `ğŸ›  é‹¼éµ Sï¼š${p.S}%\n\n`+
    `${res.conclusionText}`;

  document.getElementById("energyText").textContent = energyText;

  if(detail){
    document.getElementById("finalTraitTitle").textContent = detail.title;
    document.getElementById("traitDesc").textContent = detail.text;
    const imgKey = detail.energyKey || res.mainEnergy;
    document.getElementById("traitImg").src = ENERGY_IMAGE[imgKey] || "";
  }else{
    document.getElementById("finalTraitTitle").textContent = finalName;
    document.getElementById("traitDesc").textContent = "";
    document.getElementById("traitImg").src = ENERGY_IMAGE[res.mainEnergy] || "";
  }

  drawRadar(p);
}

/* ========= é›·é”åœ–ï¼šå…«é‚Šå½¢ï¼‹æœ€å¤–æ¡†æ­£æ–¹å½¢ï¼ˆä½ è¦çš„ï¼‰ ========= */
let radarBg = null;
(function preloadBg(){
  radarBg = new Image();
  radarBg.crossOrigin = "anonymous";
  radarBg.src = "https://i.ibb.co/8gPc8txW/result-bg.png";
})();
function drawRadar(type8){
  const c = document.getElementById("radar");
  const ctx = c.getContext("2d");
  const W = c.width, H = c.height;
  const cx = W/2, cy = H/2;

  ctx.clearRect(0,0,W,H);

  // èƒŒæ™¯
  if (radarBg && radarBg.complete) {
    ctx.drawImage(radarBg, 0, 0, W, H);
  } else {
    ctx.fillStyle = "#fff";
    ctx.fillRect(0,0,W,H);
    if (radarBg) radarBg.onload = ()=>drawRadar(type8);
  }

  // ç‰ˆé¢ï¼šå¤–æ¡†æ­£æ–¹å½¢
  const pad = 34;
  const half = Math.min(W,H)/2 - pad;
  const left = cx - half, right = cx + half;
  const top  = cy - half, bottom = cy + half;

  // å…«é‚Šå½¢åŠå¾‘ï¼ˆå¡é€²æ­£æ–¹å½¢ï¼‰
  const r = half / 0.9238795325; // cos(22.5Â°)

  const drawSquare = (h)=>{
    ctx.beginPath();
    ctx.moveTo(cx - h, cy - h);
    ctx.lineTo(cx + h, cy - h);
    ctx.lineTo(cx + h, cy + h);
    ctx.lineTo(cx - h, cy + h);
    ctx.closePath();
    ctx.stroke();
  };

  const drawOct = (rr)=>{
    ctx.beginPath();
    for(let i=0;i<8;i++){
      const ang = (-90 + i*45) * Math.PI/180;
      const x = cx + rr*Math.cos(ang);
      const y = cy + rr*Math.sin(ang);
      if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
    }
    ctx.closePath();
    ctx.stroke();
  };

  // 1) å¤–æ¡†æ­£æ–¹å½¢
  ctx.strokeStyle = "#cfcfcf";
  ctx.lineWidth = 2;
  drawSquare(half);

  // 2) å››è§’â†’ä¸­å¿ƒ è™›ç·š
  ctx.save();
  ctx.setLineDash([4,6]);
  ctx.strokeStyle = "#d9d9d9";
  ctx.lineWidth = 1.5;
  const corners = [[left,top],[right,top],[right,bottom],[left,bottom]];
  for(const [x,y] of corners){
    ctx.beginPath();
    ctx.moveTo(x,y);
    ctx.lineTo(cx,cy);
    ctx.stroke();
  }
  ctx.restore();

  // 3) åå­—è™›ç·š
  ctx.save();
  ctx.setLineDash([3,6]);
  ctx.strokeStyle = "#d9d9d9";
  ctx.lineWidth = 1.5;
  ctx.beginPath();
  ctx.moveTo(cx, top);    ctx.lineTo(cx, bottom);
  ctx.moveTo(left, cy);   ctx.lineTo(right, cy);
  ctx.stroke();
  ctx.restore();

  // 4) å…«é‚Šå½¢æ ¼ç·š
  ctx.strokeStyle = "#d0d0d0";
  ctx.lineWidth = 2;
  drawOct(r*0.35);
  drawOct(r*0.70);
  drawOct(r);

  // 5) å…«æ¢æ”¾å°„ç·š
  ctx.beginPath();
  for(let i=0;i<8;i++){
    const ang = (-90 + i*45) * Math.PI/180;
    ctx.moveTo(cx,cy);
    ctx.lineTo(cx + r*Math.cos(ang), cy + r*Math.sin(ang));
  }
  ctx.strokeStyle = "#e0e0e0";
  ctx.lineWidth = 1.5;
  ctx.stroke();

  // 6) å¤–åœˆé»ƒé»ï¼‹æ¨™ç±¤ï¼ˆè·Ÿä½ ç¤ºæ„åœ–ä½ç½®ï¼‰
  const labels = ["æŠ€å¸«","å‰µä½œè€…","æ˜æ˜Ÿ","æ”¯æŒè€…","åª’åˆè€…","å•†äºº","ç©è“„è€…","åœ°ä¸»"];
  const dotOffset = 22;

  const dots = [
    {x:left - dotOffset,  y:top - dotOffset},     // æŠ€å¸«
    {x:cx,                y:top - dotOffset},     // å‰µä½œè€…
    {x:right + dotOffset, y:top - dotOffset},     // æ˜æ˜Ÿ
    {x:right + dotOffset, y:cy},                  // æ”¯æŒè€…
    {x:right + dotOffset, y:bottom + dotOffset},  // åª’åˆè€…
    {x:cx,                y:bottom + dotOffset},  // å•†äºº
    {x:left - dotOffset,  y:bottom + dotOffset},  // ç©è“„è€…
    {x:left - dotOffset,  y:cy},                  // åœ°ä¸»
  ];

  const textPos = [
    {x:left - dotOffset - 36,  y:top - dotOffset - 6},
    {x:cx,                     y:top - dotOffset - 18},
    {x:right + dotOffset + 36, y:top - dotOffset - 6},
    {x:right + dotOffset + 44, y:cy},
    {x:right + dotOffset + 44, y:bottom + dotOffset + 6},
    {x:cx,                     y:bottom + dotOffset + 18},
    {x:left - dotOffset - 44,  y:bottom + dotOffset + 6},
    {x:left - dotOffset - 44,  y:cy},
  ];

  for(const d of dots){
    ctx.beginPath();
    ctx.fillStyle = "#f2c94c";
    ctx.arc(d.x, d.y, 7, 0, Math.PI*2);
    ctx.fill();
  }

  ctx.fillStyle = "#666";
  ctx.font = "600 16px 'Noto Sans TC'";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  for(let i=0;i<labels.length;i++){
    ctx.fillText(labels[i], textPos[i].x, textPos[i].y);
  }

  // âœ… 7) çœŸæ­£ 8 é¡å‹å„è‡ªåˆ†æ•¸ï¼ˆä¸å†ç”¨å¹³å‡å€¼ï¼‰
  // è»¸é †åºè¦è·Ÿ labels å°é½Šï¼šæŠ€å¸«â†’å‰µä½œè€…â†’æ˜æ˜Ÿâ†’æ”¯æŒè€…â†’åª’åˆè€…â†’å•†äººâ†’ç©è“„è€…â†’åœ°ä¸»
  const values = [
    type8["æŠ€å¸«"] ?? 0,
    type8["å‰µä½œè€…"] ?? 0,
    type8["æ˜æ˜Ÿ"] ?? 0,
    type8["æ”¯æŒè€…"] ?? 0,
    type8["åª’åˆè€…"] ?? 0,
    type8["å•†äºº"] ?? 0,
    type8["ç©è“„è€…"] ?? 0,
    type8["åœ°ä¸»"] ?? 0,
  ];

  const clamp01 = x => Math.max(0, Math.min(1, (x||0)/100));
  const pts = [];

  for(let i=0;i<8;i++){
    const f = clamp01(values[i]);
    const ang = (-135 + i*45) * Math.PI/180; // è®“ã€ŒæŠ€å¸«ã€è½åœ¨å·¦ä¸Šè§’ï¼Œè·Ÿç¤ºæ„åœ–ä¸€è‡´
    pts.push({ x: cx + r*f*Math.cos(ang), y: cy + r*f*Math.sin(ang) });
  }

  ctx.beginPath();
  ctx.moveTo(pts[0].x, pts[0].y);
  for(let i=1;i<pts.length;i++) ctx.lineTo(pts[i].x, pts[i].y);
  ctx.closePath();

  ctx.fillStyle = "rgba(37,99,235,0.08)";
  ctx.strokeStyle = "#2563eb";
  ctx.lineWidth = 3;
  ctx.fill();
  ctx.stroke();

  // ç‰ˆæœ¬å­—
  ctx.fillStyle = "#ef4444";
  ctx.font = "700 12px 'Noto Sans TC'";
  ctx.textAlign = "left";
  ctx.textBaseline = "alphabetic";
  ctx.fillText("v2025-12-19-8types", 12, 18);
}
</script>
</body>
</html> 
